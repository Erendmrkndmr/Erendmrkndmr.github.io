<!-- blog/event-driven-order-system.html -->
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Event-Driven Order System — Project Overview</title>
  <meta name="description" content="Order API → Event Bus → multiple subscribers. FastAPI, RabbitMQ, PostgreSQL, and the Outbox pattern." />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <link rel="stylesheet" href="../css/style.css" />
  <style>
    body{max-width:940px;margin:40px auto;padding:0 16px;font-family:system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;line-height:1.55}
    .hero{margin-bottom:24px}
    .pill{display:inline-block;border:1px solid #e5e7eb;border-radius:999px;padding:.25rem .6rem;margin-right:.4rem;font-size:.85rem}
    pre{background:#0f172a;color:#e2e8f0;padding:12px;border-radius:8px;overflow:auto}
    code{font-family:ui-monospace,SFMono-Regular,Menlo,Consolas,monospace}
    .grid{display:grid;gap:16px}
    @media(min-width:780px){.grid{grid-template-columns:1fr 1fr}}
    a.btn{display:inline-block;border:1px solid #ddd;border-radius:8px;padding:.5rem .8rem;text-decoration:none;margin-right:8px}
  </style>
</head>
<body>
  <header class="hero">
    <h1>Event-Driven Order System</h1>
    <p>Order API → Event Bus → multiple independent services. Publish to RabbitMQ via the <em>Outbox</em> pattern; Inventory → Payment → Notification flow.</p>
    <div>
      <span class="pill">FastAPI</span>
      <span class="pill">RabbitMQ</span>
      <span class="pill">PostgreSQL</span>
      <span class="pill">Docker Compose</span>
    </div>
    <p>
      <a class="btn" href="https://github.com/Erendmrkndmr/event-driven-order-system" target="_blank" rel="noopener">GitHub</a>
    </p>
  </header>

  <section>
    <h2>What I Built</h2>
    <ul>
      <li><strong>Order API</strong> accepts an order and writes <code>OrderPlaced</code> into the <em>outbox</em> table.</li>
      <li><strong>Outbox Publisher</strong> scans new outbox rows and publishes events to RabbitMQ.</li>
      <li><strong>Inventory</strong> consumes <code>order.placed</code>, checks stock, and emits <code>inventory.reserved</code> or <code>order.out_of_stock</code>.</li>
      <li><strong>Payment</strong> consumes <code>inventory.reserved</code> and emits <code>payment.completed</code> / <code>payment.failed</code>.</li>
      <li><strong>Notification</strong> logs or simulates emails based on payment/stock results.</li>
    </ul>
    <p>The design lets new services (Analytics, Loyalty, etc.) plug in simply by subscribing to the relevant exchange/routing key.</p>
  </section>

  <section class="grid">
    <div>
      <h2>Quick Start</h2>
      <ol>
        <li>Ensure <code>Docker</code> and <code>Docker Compose</code> are installed.</li>
        <li>Clone and run:
<pre><code>git clone https://github.com/Erendmrkndmr/event-driven-order-system
cd event-driven-order-system
docker compose up -d
</code></pre>
        </li>
        <li>Check services:
<pre><code>docker compose ps
# Swagger UI:  http://localhost:8000/docs
# RabbitMQ UI: http://localhost:15672  (eda_user / eda_pass)
</code></pre>
        </li>
      </ol>
    </div>
    <div>
      <h2>Test Scenarios</h2>
      <p><strong>Happy Path</strong> (stock available):</p>
<pre><code>curl -s -X POST http://localhost:8000/orders \
 -H "Content-Type: application/json" \
 -d '{"customer_id":"C100","email":"c100@example.com",
      "items":[{"sku":"TSHIRT-BLK-M","qty":1}]}'</code></pre>
      <p>Expected: Inventory <code>RESERVED</code>, Payment <code>COMPLETED</code>, Notification log.</p>
      <p>There are also out-of-stock paths and DB query examples in the repository.</p>
    </div>
  </section>

  <section>
    <h2>Architecture Notes</h2>
    <ul>
      <li>Each service runs as an independent Docker image → isolated dependencies, independent scaling.</li>
      <li>Outbox + RabbitMQ implements at-least-once delivery.</li>
      <li>Adding a new consumer is just subscribing to the appropriate routing key.</li>
    </ul>
  </section>
</body>
</html>
